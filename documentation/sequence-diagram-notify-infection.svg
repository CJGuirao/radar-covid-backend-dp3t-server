<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="595px" preserveAspectRatio="none" style="width:874px;height:595px;" version="1.1" viewBox="0 0 874 595" width="874px" zoomAndPan="magnify"><defs><filter height="300%" id="fhepsdctiza6e" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#fhepsdctiza6e)" height="254.416" style="stroke: #000000; stroke-width: 2.0;" width="490.5" x="362" y="207.5078"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="66" x2="66" y1="101.2656" y2="508.2344"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="215.5" x2="215.5" y1="101.2656" y2="508.2344"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="419" x2="419" y1="101.2656" y2="508.2344"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="601.5" x2="601.5" y1="101.2656" y2="508.2344"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="779.5" x2="779.5" y1="101.2656" y2="508.2344"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="110" x="8" y="98.3125">Health authority</text><ellipse cx="66" cy="27.7773" fill="#FEFECE" filter="url(#fhepsdctiza6e)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M66,35.7773 L66,62.7773 M53,43.7773 L79,43.7773 M66,62.7773 L53,77.7773 M66,62.7773 L79,77.7773 " fill="none" filter="url(#fhepsdctiza6e)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="110" x="8" y="520.7695">Health authority</text><ellipse cx="66" cy="533.7227" fill="#FEFECE" filter="url(#fhepsdctiza6e)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M66,541.7227 L66,568.7227 M53,549.7227 L79,549.7227 M66,568.7227 L53,583.7227 M66,568.7227 L79,583.7227 " fill="none" filter="url(#fhepsdctiza6e)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="159.5" y="98.3125">Infected person</text><ellipse cx="216" cy="27.7773" fill="#FEFECE" filter="url(#fhepsdctiza6e)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M216,35.7773 L216,62.7773 M203,43.7773 L229,43.7773 M216,62.7773 L203,77.7773 M216,62.7773 L229,77.7773 " fill="none" filter="url(#fhepsdctiza6e)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="159.5" y="520.7695">Infected person</text><ellipse cx="216" cy="533.7227" fill="#FEFECE" filter="url(#fhepsdctiza6e)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M216,541.7227 L216,568.7227 M203,549.7227 L229,549.7227 M216,568.7227 L203,583.7227 M216,568.7227 L229,583.7227 " fill="none" filter="url(#fhepsdctiza6e)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#fhepsdctiza6e)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="90" x="372" y="65.7773"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="76" x="379" y="86.3125">Mobile app</text><rect fill="#FEFECE" filter="url(#fhepsdctiza6e)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="90" x="372" y="507.2344"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="76" x="379" y="527.7695">Mobile app</text><rect fill="#FEFECE" filter="url(#fhepsdctiza6e)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="143" x="528.5" y="65.7773"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="129" x="535.5" y="86.3125">Verification service</text><rect fill="#FEFECE" filter="url(#fhepsdctiza6e)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="143" x="528.5" y="507.2344"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="129" x="535.5" y="527.7695">Verification service</text><rect fill="#FEFECE" filter="url(#fhepsdctiza6e)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="121" x="717.5" y="65.7773"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="724.5" y="86.3125">DP^3T backend</text><rect fill="#FEFECE" filter="url(#fhepsdctiza6e)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="121" x="717.5" y="507.2344"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="724.5" y="527.7695">DP^3T backend</text><polygon fill="#0000FF" points="204,143.8867,214,147.8867,204,151.8867,208,147.8867" style="stroke: #0000FF; stroke-width: 1.0;"/><line style="stroke: #0000FF; stroke-width: 1.0;" x1="66" x2="210" y1="147.8867" y2="147.8867"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="73" y="135.4893">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="99" x="86" y="127.834">Notify infection</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="113" x="86" y="143.1445">(verification code)</text><polygon fill="#0000FF" points="407,188.5078,417,192.5078,407,196.5078,411,192.5078" style="stroke: #0000FF; stroke-width: 1.0;"/><line style="stroke: #0000FF; stroke-width: 1.0;" x1="216" x2="413" y1="192.5078" y2="192.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="223" y="180.1104">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="101" x="236" y="172.4551">Notify exposure</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="236" y="187.7656">(with verification code)</text><path d="M362,207.5078 L521,207.5078 L521,214.5078 L511,224.5078 L362,224.5078 L362,207.5078 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="254.416" style="stroke: #000000; stroke-width: 2.0;" width="490.5" x="362" y="207.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="114" x="377" y="221.0762">Code verification</text><polygon fill="#0000FF" points="590,242.1289,600,246.1289,590,250.1289,594,246.1289" style="stroke: #0000FF; stroke-width: 1.0;"/><line style="stroke: #0000FF; stroke-width: 1.0;" x1="419" x2="596" y1="246.1289" y2="246.1289"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="426" y="241.3867">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="70" x="439" y="241.3867">Verify code</text><polygon fill="#008000" points="430,254.1289,420,258.1289,430,262.1289,426,258.1289" style="stroke: #008000; stroke-width: 1.0;"/><line style="stroke: #008000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="424" x2="601" y1="258.1289" y2="258.1289"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="436" y="287.0078">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="146" x="449" y="271.6973">Code is neither expired</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="86" x="449" y="287.0078">nor redeemed</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="93" x="449" y="302.3184">(JWT with TAN)</text><polygon fill="#0000FF" points="768,346.6816,778,350.6816,768,354.6816,772,350.6816" style="stroke: #0000FF; stroke-width: 1.0;"/><line style="stroke: #0000FF; stroke-width: 1.0;" x1="419" x2="774" y1="350.6816" y2="350.6816"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="426" y="338.2842">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="125" x="439" y="330.6289">Send exposure keys</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="93" x="439" y="345.9395">(JWT with TAN)</text><polygon fill="#0000FF" points="613,358.6816,603,362.6816,613,366.6816,609,362.6816" style="stroke: #0000FF; stroke-width: 1.0;"/><line style="stroke: #0000FF; stroke-width: 1.0;" x1="607" x2="779" y1="362.6816" y2="362.6816"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="619" y="376.25">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="67" x="632" y="376.25">Verify TAN</text><polygon fill="#008000" points="768,420.6133,778,424.6133,768,428.6133,772,424.6133" style="stroke: #008000; stroke-width: 1.0;"/><line style="stroke: #008000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="602" x2="774" y1="424.6133" y2="424.6133"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="609" y="412.2158">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="141" x="622" y="404.5605">TAN is neither expired</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="622" y="419.8711">or redeemed</text><polygon fill="#008000" points="430,432.6133,420,436.6133,430,440.6133,426,436.6133" style="stroke: #008000; stroke-width: 1.0;"/><line style="stroke: #008000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="424" x2="779" y1="436.6133" y2="436.6133"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="436" y="450.1816">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="124" x="449" y="450.1816">Confirm keys saved</text><polygon fill="#008000" points="227,468.9238,217,472.9238,227,476.9238,223,472.9238" style="stroke: #008000; stroke-width: 1.0;"/><line style="stroke: #008000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="221" x2="418" y1="472.9238" y2="472.9238"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="233" y="486.4922">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="166" x="246" y="486.4922">Confirm infection is saved</text><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="75" x="787.5" y="12.668">Notify infection</text><!--MD5=[4f9794c72041aa2eb4a023a4440a45a8]
@startuml
header Notify infection
skinparam responseMessageBelowArrow true
autonumber

actor "Health authority" as health
actor "Infected person" as person
participant "Mobile app" as mobile
participant "Verification service" as verification
participant "DP^3T backend" as dp3t

health -[#blue]> person: Notify infection\n(verification code)
person -[#blue]> mobile: Notify exposure\n(with verification code)
group Code verification
mobile -[#blue]> verification: Verify code
mobile <[#green]- - verification: Code is neither expired\nnor redeemed\n(JWT with TAN)
mobile -[#blue]> dp3t: Send exposure keys\n(JWT with TAN)
dp3t -[#blue]> verification: Verify TAN
dp3t <[#green]- - verification: TAN is neither expired\nor redeemed
mobile <[#green]- - dp3t: Confirm keys saved
end
person <[#green]- - mobile: Confirm infection is saved

@enduml

PlantUML version 1.2020.06(Sun Apr 05 14:38:32 CEST 2020)
(APACHE source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.7+10-jvmci-20.1-b02
Operating System: Mac OS X
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>